(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function a(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(e){if(e.ep)return;e.ep=!0;const i=a(e);fetch(e.href,i)}})();const H={Economy:["jobs","growth","tax","trade","GDP","inflation","unemployment","recession","stimulus","tax reform","monetary policy","fiscal policy","manufacturing","services","agriculture","finance","income inequality","poverty","minimum wage","consumer confidence"],War:["conflict","combat","battle","tactics","strategy","peacekeeping","troops","casualties","military intervention","alliance","insurgency","occupation","war crimes","ceasefire","arms","disarmament","drones","veterans","hostilities","peace treaty","logistics"],"National Security":["military","terrorism","defense","NATO","defense spending","veterans","military strategy","9/11","ISIS","domestic terrorism","cybersecurity","diplomacy","sanctions","intelligence","nuclear proliferation"],Healthcare:["health","insurance","care","covid","Medicare","Medicaid","Affordable Care Act","Obamacare","mental health","chronic disease","vaccination","opioid crisis","healthcare access","health disparities","pharmaceutical pricing","public health"],"Infrastructure and Urban Development":["public transit","highway system","bicycle infrastructure","railroads","urban sprawl","gentrification","housing crisis","smart cities","city","architecture","sustainable architecture","bicycle","green spaces","urban planning","zoning laws"],Education:["school","education","learning","primary education","secondary education","higher education","vocational training","student debt","school funding","standardized testing","curriculum reform","desegregation","school choice","education equity","No Child Left Behind"],Climate:["climate","environment","pollution","renewable energy","carbon emissions","fossil fuels","sustainability","Paris Agreement","Green New Deal","climate adaptation","environmental regulation","hurricanes","wildfires","drought","flooding"]},R=await d3.json("public/fileList.json");let M;const z=d3.scaleOrdinal().domain(["Democrat","Republican","whig","Federalist","Democratic-Republican"]).range(["#878fff","#ffab87","#394e85","#befac4","#9adce3"]);function $(r,t){const a=document.createElement("h3");a.textContent=r,a.classList.add("speech-title"),t.insertBefore(a,t.firstChild)}async function j(r){return(await d3.text(`/text/${r}`)).toLowerCase().replace(/[^a-z\s]/g," ").trim().split(/\s+/)}function F(r){const t={};for(const[a,o]of Object.entries(H))t[a]=o.reduce((e,i)=>e+r.filter(n=>n===i).length,0);return t}function q(r){const t={};return r.forEach(a=>{const o=a.name;t[o]||(t[o]=[]),t[o].push(a)}),t}function G(r){const t=document.getElementById("presidentDropdown");for(const a in r){const o=document.createElement("option");o.value=a,o.textContent=a,t.appendChild(o)}t.addEventListener("change",function(){const a=this.value;a&&K(a)})}function K(r){const t=document.getElementById(r);if(t){const a=t.offsetTop-200,o=document.body.scrollHeight-window.innerHeight,e=Math.min(a,o);window.scrollTo({top:e,behavior:"smooth"})}else console.warn(`Element with ID ${r} not found.`)}async function J(){const r=q(R),t=d3.create("svg").attr("width",window.innerWidth).attr("height",0).attr("id","intro");G(r),_();const a=300;let o=150;document.getElementById("container").appendChild(t.node());for(const e in r){const i=r[e];let n=40;const s=document.createElement("div");s.setAttribute("class","president-section"),s.setAttribute("id",e),s.setAttribute("data-president",e),s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="flex-start",document.getElementById("container").appendChild(s),$(e,s);const c=document.createElement("div");c.style.display="flex",c.style.flexWrap="wrap",c.style.marginTop="10px";for(let u=0;u<i.length;u++){const y=i[u],E=`${y.name}_${y.year}.txt`;M=y.party;const O=await U(E,u,n,o,M);c.appendChild(O.node()),n+=a+40}s.appendChild(c),o+=340}}async function U(r,t,a,o,e){const i=await j(r),n=F(i),s=n.Education||0,c=n.Economy||0,u=n.Healthcare||0,y=n.War||0,E=n["National Security"]||0,O=n["Infrastructure and Urban Development"]||0,B=n.Climate||0,b=300,x=300,D=d3.create("svg").attr("width",b).attr("height",x).style("margin","10px 20px").style("border","0.5px solid white"),w=D.append("g").attr("transform",`translate(${b/2},${x/2})`),T=100,W=40,d=h=>h+(Math.random()-.5)*E/3,N=d3.scaleLinear().domain([1,u]).range([0,2*Math.PI]);for(let h=1;h<u+1;h++){const p=N(h),C=c/10*T,m=s/10*W,P=[[d(0),d(0)],[d(Math.cos(p-.1)*m),d(Math.sin(p-.1)*m)],[d(Math.cos(p)*C),d(Math.sin(p)*C)],[d(Math.cos(p+.1)*m),d(Math.sin(p+.1)*m)]],L=d3.line().x(g=>g[0]).y(g=>g[1]);w.append("path").attr("d",L(P)).attr("fill",z(e)).attr("fill-opacity",.3).attr("stroke",z(e)).attr("stroke-width",3).attr("stroke-opacity",1)}w.append("circle").attr("r",y*3.2).attr("fill","#fff").attr("opacity",.5).attr("stroke","#fff").attr("stroke-width",1),w.append("circle").attr("r",O*3.2).attr("fill","none").attr("opacity",1).attr("stroke","#ffffff").attr("stroke-width",10);const v=(h,p,C,m)=>{const P=[];for(let f=0;f<=100;f++){const S=f/100*(2*Math.PI*C),I=m*(f/100),A=h+I*Math.cos(S),k=p+I*Math.sin(S);P.push([A,k])}const g=d3.line().x(f=>f[0]).y(f=>f[1]);w.append("path").attr("d",g(P)).attr("fill","none").attr("stroke","#e1fced").attr("stroke-width",2).attr("opacity",1)},l=B*2;return v(-300/2+l,-300/2+l,3,l),v(b/2-l,-300/2+l,3,l),v(-300/2+l,x/2-l,3,l),v(b/2-l,x/2-l,3,l),D}J();function _(r){let t=20;const a=[{party:"Democrat",color:"#a0b0fa",description:"Democrat speeches"},{party:"Republican",color:"#fc6a6a",description:"Republican speeches"},{party:"Whig",color:"#394e85",description:"Whig speeches"},{party:"Federalist",color:"#befac4",description:"Federalist speeches"},{party:"Democratic-Republican",color:"#9adce3",description:"Democratic-Republican speeches"}],o=[{shape:"filledInCircle",description:"Filled in White Circle = War"},{shape:"petalLength",description:"Length of petal = Economy"},{shape:"petalBreadth",description:"Breadth of petal = Education"},{shape:"jitteriness",description:"Jitteriness = National Security"},{shape:"numberOfPetals",description:"Number Of Petals = Healthcare"},{shape:"numberOfPetals",description:"Opaque ring = Infrastructure"},{shape:"numberOfPetals",description:"Size of spirals = Climate"}],i=d3.select("body").append("div").attr("class","legend-container").style("position","fixed").style("bottom","20px").style("right","20px").style("background-color","rgba(0, 0, 0, 0.7)").style("padding","10px").style("border-radius","8px").append("svg").attr("width",280).attr("height",400).append("g").attr("transform","translate(0, 0)");let n=20;i.append("text").attr("x",t).attr("y",n).text("Colours:").attr("font-size","24px").attr("fill","#fff").style("font-family","sztos-variable, sans-serif").style("font-variation-setting","'wght' 50, 'wdth' 100"),n+=30,a.forEach((s,c)=>{i.append("circle").attr("cx",t+20).attr("cy",n+c*25).attr("r",7).attr("fill",s.color),i.append("text").attr("x",t+40).attr("y",n+c*25+5).text(s.description).attr("font-size","14px").attr("fill","#fff").style("font-family","sztos-variable, sans-serif").style("font-variation-settings","'wght' 150, 'wdth' 170")}),n+=a.length*25+40,i.append("text").attr("x",t).attr("y",n).text("Shapes:").attr("font-size","24px").attr("fill","#fff").style("font-family","sztos-variable, sans-serif").style("font-variation-setting","'wght' 50, 'wdth' 100"),n+=30,o.forEach((s,c)=>{i.append("circle").attr("cx",t+20).attr("cy",n+c*25).attr("r",4).attr("fill","#fff"),i.append("text").attr("x",t+40).attr("y",n+c*25+5).text(s.description).attr("font-size","14px").attr("fill","#fff").style("font-family","sztos-variable, sans-serif").style("font-variation-settings","'wght' 150, 'wdth' 170")})}
